function login(e,s){$.ajax({type:"GET",beforeSend:function(s){s.setRequestHeader("Authorization","Basic "+e)},url:GURL+"Schueler-Stundenplan/default.htm",success:function(s){Auth(e)},error:function(e,t,n){console.log(n),s===CLICK?unAuth():(moveInLogin(),setTimeout(function(){unAuth()},1500))}})}function accessStufe(){moveOutStufe(),null===checkCookie("kl")||null===checkCookie("tt")?(startSpinner(),getKurse("a"),getKurse("b")):scrawl()}function TTLoaded(){return document.cookie="tt="+JSON.stringify(GTimeTable)+EXP,null!==checkCookie("kl")?(stopSpinner(),void scrawl()):($("#selectkurs-wrapper").removeClass("hidden"),GKURSE.forEach(function(e){var s=null;e.kurse.forEach(function(e){var t=!1;if(layedKurse.forEach(function(s){s===e.fach&&(t=!0)}),!t){layedKurse.push(e.fach),s!==e.title&&$("#selectkurs-inner-wrapper").append('<div class="kurs-select"><div class="kurs-select-inner"><div><span>Frei</span></div><h6>'+e.title+"</h6></div></div>"),s=e.title,$("#selectkurs-inner-wrapper").append('<div class="kurs-select"><div class="kurs-select-inner"><div><span>'+e.fach+"</span></div><h6>"+e.title+"</h6></div></div>");var n=$("<span>"+e.title+"</span>"),c=!1;avTitles.forEach(function(s){s.title===e.title&&(c=!0)}),c||n.appendTo("#kurse-title-container"),avTitles.push({title:e.title,used:0,span:n})}})}),void stopSpinner())}function slide(e){var s=$(".tag").toArray();$(s[e?0:1]).show(),$(s[e?1:0]).hide()}const CLICK=0;$("#termsaccept").on("click",function(e){e.preventDefault(),document.cookie="a=true;expires=Fri, 31 Dec 9999 23:59:59 GMT",$("#terms").css("display","none"),checkLoginCookie()}),$("#login-form").submit(function(e){e.preventDefault(),console.log($("#select").val()+":"+$("#psw").val());var s=btoa($("#select").val()+":"+$("#psw").val());login(s,CLICK)});var selectedKurse=[],avTitles=[],layedKurse=[];$("#selectkurs-inner-wrapper").on("click",".kurs-select",function(){if($(this).hasClass("selected")){$(this).removeClass("selected");const e=$(this).find("span").html(),s=$(this).find("h6").html();avTitles.forEach(function(e){e.title===s&&(e.used--,e.used>1?e.span.css("color","red").css("font-weight","600").css("font-style","italic"):1===e.used?e.span.css("color","green").css("font-weight","300").css("font-style","normal"):e.span.css("color","black").css("font-weight","600").css("font-style","normal"))}),selectedKurse.push(e)}else{$(this).addClass("selected");const e=$(this).find("span").html(),s=$(this).find("h6").html();avTitles.forEach(function(e){e.title===s&&(e.used++,e.used>1?e.span.css("color","red").css("font-weight","600").css("font-style","italic"):1===e.used&&e.span.css("color","green").css("font-weight","300").css("font-style","normal"))}),selectedKurse.push(e)}}),$("#stufe-form").submit(function(e){if(e.preventDefault(),""!==$("#stufe").val()){Gstufe=$("#stufe").val();for(var s=0;s<GStufeA.length;s++)GStufeA[s]===Gstufe&&(GStufeid=s+1);document.cookie="stufe="+Gstufe+EXP,document.cookie="stufeid="+GStufeid+EXP,accessStufe()}}),$("#kurseSelected").click(function(e){e.preventDefault();var s=!0;if(avTitles.forEach(function(e){1!==e.used&&(s=!1)}),!s)return $("#selectkurs-inner-wrapper").addClass("shake shake-constant"),void setTimeout(function(){$("#selectkurs-inner-wrapper").removeClass("shake shake-constant")},200);selectedKurse.forEach(function(e){GKURSE.forEach(function(s,t){s.kurse.forEach(function(s){if(e===s.fach){var t=null;GMyKurse.forEach(function(e,n){e.fach===s.fach&&(t=n)}),null===t&&GMyKurse.push(s)}})})});var t={a:GMyKurse},n=JSON.stringify(t),c=splitter(n,3500);c.forEach(function(e,s){document.cookie="k"+s+"="+e+EXP}),document.cookie="kl="+c.length+EXP,$("#selectkurs-wrapper").addClass("hidden"),scrawl()}),$("#leftarrow, #leftbig").click(function(){slide(!0)}),$("#rightarrow, #rightbig").click(function(){slide(!1)});