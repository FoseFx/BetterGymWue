function login(e,t){$.ajax({type:"GET",contentType:"Content-type: text/html; charset=iso-8859-1",beforeSend:function(t){t.setRequestHeader("Authorization","Basic "+e),t.overrideMimeType("text/html;charset=iso-8859-1")},url:GURL+"Schueler-Stundenplan/default.htm",success:function(t){Auth(e)},error:function(e,s,n){console.log(n),t===CLICK?unAuth():(moveInLogin(),setTimeout(function(){unAuth()},1500))}})}function accessStufe(){moveOutStufe(),null===checkCookie("kl")||null===checkCookie("tt")?(startSpinner(),getKurse("a"),getKurse("b")):scrawl()}function orderGKURSE(){GKURSE.forEach(function(e){var t=[];e.kurse.forEach(function(e){var s=!0;t.forEach(function(n){return 0===t.length?!0:void(n[0]===e.title&&(s=!1))}),s?t.push([e.title,[e]]):t.forEach(function(s,n){s[0]===e.title&&t[n][1].push(e)})}),e.kurse=[],t.forEach(function(t){t[1].forEach(function(t){e.kurse.push(t)})})})}function TTLoaded(){return null!==checkCookie("kl")?(stopSpinner(),void scrawl()):($("#selectkurs-wrapper").removeClass("hidden"),orderGKURSE(),GKURSE.forEach(function(e){var t=null;e.kurse.forEach(function(e){var s=!1;if(layedKurse.forEach(function(t){t===e.fach&&(s=!0)}),!s){layedKurse.push(e.fach),t!==e.title&&$("#selectkurs-inner-wrapper").append('<div class="kurs-select"><div class="kurs-select-inner"><div><span>Frei</span></div><h6>'+e.title+"</h6></div></div>"),t=e.title,$("#selectkurs-inner-wrapper").append('<div class="kurs-select"><div class="kurs-select-inner"><div><span>'+e.fach+"</span></div><h6>"+e.title+"</h6></div></div>");var n=$("<span>"+e.title+"</span>"),o=!1;avTitles.forEach(function(t){t.title===e.title&&(o=!0)}),o||n.appendTo("#kurse-title-container"),avTitles.push({title:e.title,used:0,span:n})}})}),void stopSpinner())}function slide(e){var t=$(".tag").toArray();$(t[e?0:1]).show(),$(t[e?1:0]).hide()}function controls(e){e?$("#controls").addClass("active"):$("#controls").removeClass("active")}function kursChange(){for(var e=0;e<checkCookie("kl");e++)delete_cookie("k"+e);delete_cookie("kl"),location.reload()}function stufeChange(){delete_cookie("stufe"),delete_cookie("stufeid"),location.reload()}function delete_cookie(e){document.cookie=e+"=; expires=Thu, 01 Jan 1970 00:00:01 GMT;"}const CLICK=0;$("#termsaccept").on("click",function(e){e.preventDefault(),document.cookie="a=true;expires=Fri, 31 Dec 9999 23:59:59 GMT",$("#terms").css("display","none"),checkLoginCookie()}),$("#login-form").submit(function(e){e.preventDefault(),console.log($("#select").val()+":"+$("#psw").val());var t=btoa($("#select").val()+":"+$("#psw").val());login(t,CLICK)});var selectedKurse=[],avTitles=[],layedKurse=[];$("#selectkurs-inner-wrapper").on("click",".kurs-select",function(){if($(this).hasClass("selected")){$(this).removeClass("selected");const e=$(this).find("span").html(),t=$(this).find("h6").html();avTitles.forEach(function(e){e.title===t&&(e.used--,e.used>1?e.span.css("color","red").css("font-weight","600").css("font-style","italic"):1===e.used?e.span.css("color","green").css("font-weight","300").css("font-style","normal"):e.span.css("color","black").css("font-weight","600").css("font-style","normal"))}),selectedKurse.push(e)}else{$(this).addClass("selected");const e=$(this).find("span").html(),t=$(this).find("h6").html();avTitles.forEach(function(e){e.title===t&&(e.used++,e.used>1?e.span.css("color","red").css("font-weight","600").css("font-style","italic"):1===e.used&&e.span.css("color","green").css("font-weight","300").css("font-style","normal"))}),selectedKurse.push(e)}}),$("#stufe-form").submit(function(e){if(e.preventDefault(),""!==$("#stufe").val()){Gstufe=$("#stufe").val();for(var t=0;t<GStufeA.length;t++)GStufeA[t]===Gstufe&&(GStufeid=t+1);document.cookie="stufe="+Gstufe+EXP,document.cookie="stufeid="+GStufeid+EXP,accessStufe()}}),$("#kurseSelected").click(function(e){e.preventDefault();var t=!0;if(avTitles.forEach(function(e){1!==e.used&&(t=!1)}),!t)return $("#selectkurs-inner-wrapper").addClass("shake shake-constant"),void setTimeout(function(){$("#selectkurs-inner-wrapper").removeClass("shake shake-constant")},200);selectedKurse.forEach(function(e){GKURSE.forEach(function(t,s){t.kurse.forEach(function(t){if(e===t.fach){var s=null;GMyKurse.forEach(function(e,n){e.fach===t.fach&&(s=n)}),null===s&&GMyKurse.push(t)}})})});var s={a:GMyKurse},n=JSON.stringify(s),o=splitter(n,3500);o.forEach(function(e,t){document.cookie="k"+t+"="+e+EXP}),document.cookie="kl="+o.length+EXP,$("#selectkurs-wrapper").addClass("hidden"),scrawl()}),$("#leftarrow, #leftbig").click(function(){slide(!0)}),$("#rightarrow, #rightbig").click(function(){slide(!1)});