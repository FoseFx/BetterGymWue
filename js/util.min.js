function splitter(t,e){for(var n=[];t.length>e;){var a=t.substring(0,e).lastIndexOf(" ");a=0>=a?e:a,n.push(t.substring(0,a));var o=t.indexOf(" ",a)+1;(a>o||o>a+e)&&(o=a),t=t.substring(o)}return n.push(t),n}function stopSpinner(){$("#spinner").css("opacity","0"),setTimeout(function(){$("#spinner").css("display","none"),$("#page-wraper").css("display","block"),setTimeout(function(){$("#page-wraper").css("opacity","1")},10)},200)}function startSpinner(){$("#page-wraper").css("opacity","0"),setTimeout(function(){$("#page-wraper").css("display","none"),$("#spinner").css("display","flex"),setTimeout(function(){$("#spinner").css("opacity","1")},10)},200)}function showAGB(){$("#terms").css("display","flex")}function checkLoginCookie(){var t=checkCookie("key");null!==t?login(t,1):moveInLogin()}function checkStufeCookie(){startSpinner();var t=checkCookie("stufe");null!==t?(Gstufe=t,GStufeid=checkCookie("stufeid"),accessStufe()):(moveInStufe(),getStufen()),stopSpinner(),$(".nointeract").removeClass("nointeract")}function moveInLogin(){setTimeout(function(){$("#login-wrapper").css("transform","translate(-50%,-50%)")},700)}function unAuth(){$("#login-wrapper").css("box-shadow","0px 0px 12px 0px rgba(255,36,36,1)"),$("#page-wraper").addClass("shake shake-constant"),setTimeout(function(){$("#page-wraper").removeClass("shake shake-constant"),$("#psw").val("")},200)}function moveInStufe(){$("#stufe-wrapper").removeClass("hidden").css("transform","translate(-50%, -50%)")}function Auth(t){document.cookie="key="+t+";expires=Fri, 31 Dec 9999 23:59:59 GMT",Gkey=t,$("#login-wrapper").css("opacity","0"),setTimeout(function(){$("#login-wrapper").css("display","none"),checkStufeCookie()},500)}function checkCookie(t){var e=null;return document.cookie.split(";").forEach(function(n){var a=n.split("=");a[0].replace(/\s/g,"")===t&&(e=a[1])}),e}function moveOutStufe(){$("#stufe-wrapper").css("transform","translate(-1000%, -50%)"),setTimeout(function(){$("#login-wrapper").hide()},500)}function getWeekOfYear(t){return t.getWeek()}function to5erString(t){for(var e=t;5!==e.length;)e="0"+e;return e}function scrawl(){if(allowed){allowed=!1,startSpinner();var t=Scbase+Scmid+Scurl;$.ajax({cache:!1,url:t,beforeSend:function(t){t.setRequestHeader("Authorization","Basic "+Gkey)},success:function(t){Scfiles.push(Scurl),Scurl=t.split('<meta http-equiv="refresh" content="10; URL=')[1].split('">')[0],Scbodys.push(t.split('<body bgcolor="#F0F0F0">')[1].split("</body>")[0]),t=null,allowed=!0,-1===Scfiles.indexOf(Scurl)?scrawl():evaScrawl()}})}}function evaScrawl(){if(Scrawled++,1===Scrawled&&(Scbody1=Scbodys,Scmid="f2/",Scurl="subst_001.htm",Scfiles=[],Scbodys=[],scrawl()),2===Scrawled){Scbody2=Scbodys;var t=[],e=[];Scbody1.forEach(function(n){n=$(n);var a=n.find("td.info");if(0===a.length&&(a=null),null!==a){var o=[];a.each(function(){o.push($(this).html())}),o.forEach(function(e){-1===t.indexOf(e)&&t.push(e)})}var r=[];$(n.find("table.mon_list")[0]).children("tbody").children().each(function(t){if(0!==t)if(1===$(this).children().length)r.push({klasse:$(this).children(".inline_header").html(),ctnd:[]});else{var e=$(this).children(),n=[,$(e[1]).html()];-1!==n[1].indexOf(" - ")&&(n=n[1].split(" - "),r[r.length-1].ctnd.push({date:$(e[0]).html(),stunde:n[0],kurs:$(e[2]).html(),type:$(e[3]).children("b").html(),nraum:$(e[5]).html(),info:$(e[6]).html()})),r[r.length-1].ctnd.push({date:$(e[0]).html(),stunde:n[1],kurs:$(e[2]).html(),type:$(e[3]).children("b").html(),nraum:$(e[5]).html(),info:$(e[6]).html()})}}),r.forEach(function(t){var n=!1;e.forEach(function(e){e.klasse===t.klasse&&(n=!0,t.ctnd.forEach(function(t){e.ctnd.push(t)}))}),n||e.push(t)})}),t=[[],t],e=[[],e],Scbody2.forEach(function(n){n=$(n);var a=n.find("td.info");if(0===a.length&&(a=null),null!==a){var o=[];a.each(function(){o.push($(this).html())}),o.forEach(function(e){-1===t[0].indexOf(e)&&t[0].push(e)})}var r=[];$(n.find("table.mon_list")[0]).children("tbody").children().each(function(t){if(0!==t)if(1===$(this).children().length)r.push({klasse:$(this).children(".inline_header").html(),ctnd:[]});else{var e=$(this).children(),n=[,$(e[1]).html()];-1!==n[1].indexOf(" - ")&&(n=n[1].split(" - "),r[r.length-1].ctnd.push({date:$(e[0]).html(),stunde:n[0],kurs:$(e[2]).html(),type:$(e[3]).children("b").html(),nraum:$(e[5]).html(),info:$(e[6]).html()})),r[r.length-1].ctnd.push({date:$(e[0]).html(),stunde:n[1],kurs:$(e[2]).html(),type:$(e[3]).children("b").html(),nraum:$(e[5]).html(),info:$(e[6]).html()})}}),r.forEach(function(t){var n=!1;e[0].forEach(function(e){e.klasse===t.klasse&&(n=!0,t.ctnd.forEach(function(t){e.ctnd.push(t)}))}),n||e[0].push(t)})}),e.reverse(),console.log(e),console.log(t),stopSpinner();var n;e.forEach(function(a,o){var r=new Date,c=["So","Mo","Di","Mi","Do","Fr","Sa"];for(1===o&&r.setDate(r.getDate()+1);0===r.getDay()||6===r.getDay();)r.setDate(r.getDate()+1);0===o&&(n=r),1===o&&n.getDate()==r.getDate()&&r.setDate(r.getDate()+1);var s=r.getDate()+"."+(r.getMonth()+1)+".";console.log(r);var i='<div class="tag scrollbar">\n                    <h1>'+c[r.getDay()]+" "+s+"</h1>\n                    <hr>\n                    <table>\n                        <tbody class='lul'>\n                            <tr><td><b>Std.</b></td><td><b>Fach</b></td><td><b>Raum</b></td><td><b>Lehrer</b></td></td><td></td></tr>\n                        </tbody>\n                    </table>\n                </div>",l=$(i),d=$(l).find("tbody.lul")[0],u=r.getWeek()%2===0?0:1,h=GTimeTable[u].days[r.getDay()-1];h.forEach(function(t,e){var n="";t==={}?n="<tr><td colspan='5'>Pause</td></tr>":"klasse"===t.type?n="<tr><td>"+(e+1)+"</td><td>"+t.fach+"</td><td>"+t.raum+"</td><td>"+t.lehrer+"</td></tr>":"kurs"===t.type&&GMyKurse.forEach(function(a){if(a.title===t.fach){var o=null;t.raeume.forEach(function(t){t.kurs===a.fach&&(o=t.raum)}),o=null===o?"- - -":o,n="<tr><td>"+(e+1)+"</td><td>"+a.fach+"</td><td>"+o+"</td><td>"+a.lehrer+"</td></tr>"}}),n=n.replace("undefined","?"),n=n.replace("null",""),$(d).append(n)});var f=[];e.forEach(function(t){t.forEach(function(t){-1!==t.klasse.indexOf(Gstufe)&&t.ctnd.forEach(function(t){t.date===s&&(GMyKurse.forEach(function(e){(e.fach===t.kurs||"&nbsp;"===t.kurs)&&f.push(t)}),GTimeTable[u].days.forEach(function(e){e.forEach(function(e){e!=={}&&null!==e&&"klasse"===e.type&&e.fach===t.kurs&&f.push(t)})}))})})}),console.log(f),f.forEach(function(t){var e=t.stunde;$(d).children().each(function(){$($(this).children()[0]).html()===e&&("Vertretung"===t.type&&$(this).append("<b id='moveto"+e+"'></b>"),$(this).children("td").each(function(){$(this).appendTo("moveto"+e)}))})});var p=$("<h3>Info</h3>\n<table class='hi'>\n    <tbody class=\"headerTab\">\n        \n    </tbody>\n</table>");t.forEach(function(t,n){e[n][0].ctnd[0].date===s&&t!==[]&&void 0!==t[0]&&void 0!==t[1]&&p.find(".headerTab").append("<tr><td>"+t[0]+"</td><td>"+t[1]+"</td></tr>")}),0!==$(p).find("tbody").children().length&&l.append($(p));var m=$("<h3>"+Gstufe+"</h3>\n<table class='hi'>\n   <tbody>\n       \n   </tbody>\n</table>");e.forEach(function(t,e){t.forEach(function(t,e){-1!==t.klasse.indexOf(Gstufe)&&t.ctnd.forEach(function(t){t.date===s&&m.find("tbody").append("<tr><td>"+t.stunde+"</td><td>"+t.kurs+"</td><td>"+t.type+"</td><td>"+t.nraum+"</td></tr>")})})}),0!==m.find("tbody").children().length&&l.append(m),$("#inner-tag-wrapper").append(l)}),$("#anzeigen-wrapper").removeClass("hidden")}}$(document).ready(function(){var t=!1;document.cookie.split(";").forEach(function(e){"a=true"==e&&(t=!0)}),stopSpinner(),t||showAGB(),t&&checkLoginCookie();var e=checkCookie("key");null!==e&&(Gkey=e);var n=JSON.parse(checkCookie("tt"));null!==n&&(GTimeTable=n);var a=checkCookie("kl");if(null!==a){for(var o="",r=0;a>r;r++)o+=checkCookie("k"+r);GMyKurse=JSON.parse(o).a}}),Date.prototype.getWeek=function(){var t=new Date(this.valueOf()),e=(this.getDay()+6)%7;t.setDate(t.getDate()-e+3);var n=t.valueOf();return t.setMonth(0,1),4!=t.getDay()&&t.setMonth(0,1+(4-t.getDay()+7)%7),1+Math.ceil((n-t)/6048e5)};var Scrawled=0,Scbase=GURL+"Schueler/",Scmid="f1/",Scurl="subst_001.htm",Scfiles=[],Scbodys=[],Scbody1=null,Scbody2=null,allowed=!0;