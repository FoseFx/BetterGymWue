function getStufen(){$.ajax({contentType:"Content-type: text/html; charset=iso-8859-1",url:GURL+"Schueler-Stundenplan/frames/navbar.htm",beforeSend:function(e){e.setRequestHeader("Authorization","Basic "+Gkey),e.overrideMimeType("text/html;charset=iso-8859-1")},type:"GET",success:function(e){var t=e.split("var classes = ")[1].split(";")[0].replace(/(")|(\[)|(])|( )/g,"").split(",");GStufeA=t,t.forEach(function(e){$("#stufe").append("<option>"+e+"</option>")})},error:function(e,t,r){alert("Serververbindung fehlgeschlagen: "+r+"\nEin reload könnte helfen")}})}function getKurse(e){$.ajax({contentType:"Content-type: text/html; charset=iso-8859-1",url:GURL+"Schueler-Stundenplan/frames/navbar.htm",beforeSend:function(e){e.setRequestHeader("Authorization","Basic "+Gkey),e.overrideMimeType("text/html;charset=iso-8859-1")},type:"GET",success:function(t){var r=[];t=t.split('<select name="week" class="selectbox" onChange="doDisplayTimetable(NavBar, topDir);">')[1],t=t.split("</select>")[0],t.split('<option value="').splice(1,2).forEach(function(e,t){r[t]=e.split('"')[0]});var n=r[0]%2===0?r[0]:r[1],a=r[0]%2!==0?r[0]:r[1],i="a"===e?n:a,h=GURL+"Schueler-Stundenplan/"+i+"/c/c"+to5erString(GStufeid)+".htm";console.log(h),$.ajax({contentType:"Content-type: text/html; charset=iso-8859-1",url:h,beforeSend:function(e){e.setRequestHeader("Authorization","Basic "+Gkey),e.overrideMimeType("text/html;charset=iso-8859-1")},success:function(t){evaKurse(t,e)},error:function(e,t,r){alert("Serververbindung fehlgeschlagen: "+r+"\nEin reload könnte helfen")}})}})}function evaKurse(e,t){var r=[],n=$(e.replace(/\r?\n|\r/g,"").toUpperCase()),a=n.children("table")[0];$(a).children("tbody").children("tr")[0].remove(),a=$(a).children("tbody")[0],$(a).find("b").each(function(){"PAUSE"===$(this).html()&&$(this).parents().eq(6).attr("id","pause").html(" ")});var i=0;$(a).children("tr").each(function(e){var n=$(this);if(!n.is("#pause")){var a=[];if(""===n.html())return i++,void n.remove();n.children("td").each(function(r){var n=r;if(0!==r){var h=!1;"4"===$(this).attr("rowspan")&&(h=!0);var s=$(this).children("table").children("tbody"),l=s.children("tr");if(1===l.length){var c=l.find("font");if(1===c.length&&""!==c.html())return;var o=$(c[0]).children("b").html(),u=$(c[1]).html(),f=$(c[2]).html(),d={type:"klasse",isBig:h,fach:o,lehrer:u,raum:f,pos:[e-i+1,n-1]};a.push(d)}else{var o=l.find("font").children("b").html(),p=[];l.each(function(e){if(0!==e){var r=$($(this).children("td")[0]).children("font").html(),n=$($(this).children("td")[1]).children("font").html(),a=$($(this).children("td")[2]).children("font").html();p.push({kurs:r,raum:a}),addKurs({title:o,fach:r,lehrer:n},t)}});var d={type:"kurs",fach:o,isBig:h,raeume:p};a.push(d)}}}),r.push(a)}});for(var h=[],s=0;s<r.length;s++)if(0!==r[s].length){var l=!0;l&&h.push(r[s]);var c="a"===t?0:1}var o={days:[[],[],[],[],[]]};h.forEach(function(e,t){e.forEach(function(e,r){for(var n={},a=r,i=t,h=o.days[a][i];"undefined"!=typeof h;)i++,h=o.days[a][i];(void 0!==e.fach||"klasse"===e.fach)&&("klasse"===e.type?n={type:e.type,fach:e.fach,lehrer:e.lehrer,raum:e.raum}:"kurs"===e.type&&(n={type:e.type,fach:e.fach,raeume:e.raeume})),o.days[a][i]=n,e.isBig&&(o.days[a][i+1]=n)})});for(var s=0;5>s;s++)o.days[s].splice(6,0,{});GTimeTable[c]=o,TTLoaded()}function addKurs(e,t){for(var r=null,n="a"===t?0:1,a=0;a<GKURSE[n].kurse.length;a++)e.fach===GKURSE[n].kurse[a].fach&&(r=a);null===r&&GKURSE[n].kurse.push({fach:e.fach,lehrer:e.lehrer,title:e.title})}